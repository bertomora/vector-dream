# 2026-02-14 - Vector Dream NFT Development Session

## Summary
Extended late-night session building dynamic NFT infrastructure on Base. Multiple contract iterations to solve OpenSea display issues.

## Key Discovery: Why Some NFTs Display, Others Don't

**Working contract (0x8f66b06d...):**
- TokenURI returns `data:application/json;base64,...` (ON-CHAIN)
- OpenSea reads it instantly
- Image field: `/api/image?seed=...` → returns SVG
- Animation: Arweave URL

**Broken contracts:**
- TokenURI returns external URL (https://...)
- OpenSea has to fetch it → can fail/delay
- Takes time to index, may show placeholder

**Lesson:** On-chain metadata (data: URI) = instant OpenSea display. External metadata URLs = unreliable/slow.

## Contracts Deployed Tonight

| Address | Type | Status |
|---------|------|--------|
| `0x8f66b06d02d857c3b7739aa9318beeea54bba03b` | On-chain metadata | ✅ WORKING |
| `0x7CFA602fE5F944aEd324d9d48767Ed16c09A6171` | VectorDreamV3 (on-chain) | ✅ Working |
| `0xbaE88927F84adc3a16aa3A41340631f5F285FA0A` | Dynamic (external API) | ⚠️ Slow to index |
| `0xE87Cfb82f780d3cCe3571245AFE9156BbB825C71` | Dynamic old | Has 1 mint |
| `0x114A60DFDcE702015572528c05464596e573251b` | VectorDreamV3 old | Empty |

## Dynamic NFT Features Built
- Real-time CoinGecko price feeds (ETH/BTC)
- Market mood: Euphoric/Bullish/Rising/Neutral/Bearish/Fearful
- Time-based changes: Dawn/Day/Dusk/Night
- EIP-4906 metadata refresh support
- API at `/api/dynamic/[tokenId]?seed=...`

## Key Files
- `contracts/VectorDreamV3.sol` - On-chain metadata, reliable
- `contracts/VectorDreamDynamic.sol` - External metadata, dynamic but slower
- `api/dynamic/[tokenId].js` - Dynamic metadata API with CoinGecko
- `api/image.js` - SVG/PNG image generator
- `scripts/withdraw-all.js` - ETH consolidation (40+ contracts)

## Deployer Wallet
- Address: `0x56191738511E61E8874b8e7A1467eE84E5b3BFfe`
- Balance: ~0.0046 ETH on Base, ~0.0063 ETH on mainnet

## Next Steps
- Consider hybrid approach: on-chain metadata + dynamic image URLs
- User may need to refresh metadata on OpenSea for dynamic contract
- Jack Butcher's Trademark uses external metadata successfully - timing/indexing issue?

## Website
- URL: https://vector-dream.vercel.app
- Currently points to: `0xbaE88927F84adc3a16aa3A41340631f5F285FA0A` (VectorDreamDynamic)
- Force-redeployed with `vercel --force` to clear any caching issues

## Latest Contract (VectorDreamFix)
- Address: `0xc870F94c6EfFa2C90CD6Cdd28F8D2379882c5975`
- Uses EXACT same pattern as working contract
- On-chain metadata: `data:application/json;base64,...`
- Animation URL: Arweave (same as working)
- Image URL: `/api/image?seed=...`

## Final Understanding
The WORKING contract (0x8f66...) has:
1. On-chain JSON metadata (`data:application/json;base64,...`)
2. Image: `https://vector-dream.vercel.app/api/image?seed=1744`
3. Animation: `https://arweave.net/lZQFvapdJasRD_E9Dbuvj_LsSpL9NN-sctxIM093hP8?seed=1744`

All the broken contracts either:
- Used external metadata URLs (OpenSea has to fetch, slow/unreliable)
- Used Vercel for animation_url instead of Arweave
- Had other subtle differences

VectorDreamFix replicates the working pattern exactly.
